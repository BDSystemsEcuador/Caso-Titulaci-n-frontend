{{ formEventPlanningIn.value | json }}

<div class="p-fluid">
  <form [formGroup]="formEventPlanningIn" (ngSubmit)="onSubmit($event)">
    <div class="p-field">
      <label for="planning">
        <i class="p-error">*</i> Convocatoria:
        <i
          *ngIf="planningField.valid"
          class="pi pi-check-circle icon-valid"
        ></i>
        <i
          *ngIf="
            planningField.invalid &&
            (planningField.touched || planningField.dirty)
          "
          class="pi pi-times-circle icon-invalid"
        ></i>
      </label>
      <p-dropdown
        id="planning"
        [options]="plannings"
        formControlName="planning"
        optionLabel="name"
        [filter]="true"
        filterBy="name"
        [showClear]="true"
        placeholder="Selecciona el evento"
      >
        <ng-template pTemplate="selectedPlanning">
          <div class="country-item country-item-value" *ngIf="selectedPlanning">
            <div>{{ selectedPlanning.name }}</div>
          </div>
        </ng-template>
        <ng-template let-selectedPlan pTemplate="selectedPlanning">
          <div class="country-item">
            <div>{{ selectedPlan.name }}</div>
          </div>
        </ng-template>
      </p-dropdown>
    </div>

    <div class="p-field">
      <label for="event">
        <i class="p-error">*</i> Evento:
        <i *ngIf="eventField.valid" class="pi pi-check-circle icon-valid"></i>
        <i
          *ngIf="eventField.invalid && (eventField.touched || eventField.dirty)"
          class="pi pi-times-circle icon-invalid"
        ></i>
      </label>
      <p-dropdown
        id="event"
        [options]="events"
        formControlName="event"
        optionLabel="name"
        [filter]="true"
        filterBy="name"
        [showClear]="true"
        placeholder="Selecciona el evento"
      >
        <ng-template pTemplate="selectedEvent">
          <div class="country-item country-item-value" *ngIf="selectedEvent">
            <div>{{ selectedEvent.name }}</div>
          </div>
        </ng-template>
        <ng-template let-selectedEv pTemplate="selectedEvent">
          <div class="country-item">
            <div>{{ selectedEv.name }}</div>
          </div>
        </ng-template>
      </p-dropdown>
    </div>

    <!-- <div class="p-lg-6 p-md-12 p-col-12"> -->
    <div class="p-grid">
      <div class="p-field p-lg-6">
        <label for="startDate">
          <i class="p-error">*</i> Fecha Inicial:
          <i
            *ngIf="startDateField.valid"
            class="pi pi-check-circle icon-valid"
          ></i>
          <i
            *ngIf="
              startDateField.invalid &&
              (startDateField.touched || startDateField.dirty)
            "
            class="pi pi-times-circle icon-invalid"
          ></i>
        </label>
        <app-date
          id="startDate"
          name="startDate"
          formControlName="start_date"
        ></app-date>
        <!-- <p-calendar id="startDate" name="startDate" formControlName="startDate" [monthNavigator]="true" [yearNavigator]="true" yearRange="2018:2050"></p-calendar> -->

        <div *ngIf="startDateField.errors && startDateField.touched">
          <small
            *ngIf="startDateField.hasError('required')"
            id="start_date-help-1"
            class="p-error"
          >
            {{ messageService.fieldRequired }}
          </small>
        </div>
      </div>
      <div class="p-field p-lg-6">
        <label for="endDate">
          <i class="p-error">*</i> Fecha Final:
          <i
            *ngIf="endDateField.valid"
            class="pi pi-check-circle icon-valid"
          ></i>
          <i
            *ngIf="
              endDateField.invalid &&
              (endDateField.touched || endDateField.dirty)
            "
            class="pi pi-times-circle icon-invalid"
          ></i>
        </label>
        <app-date
          id="endDate"
          name="endDate"
          formControlName="end_date"
        ></app-date>

        <!-- <p-calendar id="endDate" name="endDate" formControlName="end_date" [monthNavigator]="true" [yearNavigator]="true" yearRange="2018:2050"></p-calendar> -->
        <!-- <input type="date" id="endDate" name="endDate" formControlName="end_date"> -->
        <div *ngIf="endDateField.errors && endDateField.touched">
          <small
            *ngIf="endDateField.hasError('required')"
            id="end_date-help-1"
            class="p-error"
          >
            {{ messageService.fieldRequired }}
          </small>
        </div>
      </div>
    </div>
    <label for="observations"> Observaciones: </label>
    <div formArrayName="observations" class="p-field">
      <div>
        <button
          pButton
          pRipple
          type="button"
          label="Añadir una observación"
          iconPos="right"
          icon="pi pi-plus"
          class="p-button-success p-button-raised"
          (click)="addObservations()"
        ></button>
      </div>
      <div
        *ngFor="
          let observations of observationsField.controls;
          let nameObservation = index
        "
      >
        <div class="p-fluid p-formgrid p-grid">
          <div class="p-field p-xl-11 p-lg-11 p-md-6 p-sm-12">
            <input
              pInputText
              id="observations"
              [formControlName]="nameObservation"
            />
          </div>
          <div class="p-field p-xl-1 p-lg-1 p-md-1 p-sm-12">
            <button
              pButton
              pRipple
              type="button"
              icon="pi pi-trash"
              class="p-button-danger p-button-rounded"
              (click)="removeObservations(nameObservation)"
            ></button>
          </div>
          <div
            *ngIf="
              observationsField.errors &&
              (observationsField.touched || observationsField.dirty)
            "
          >
            <small
              *ngIf="observationsField.hasError('required')"
              id="observations-help-1"
              class="p-error"
            >
              {{ messageService.fieldRequired }}
            </small>
          </div>
        </div>
      </div>
    </div>
    <div class="p-formgrid p-grid">
      <div class="p-field p-col">
        <button
          pButton
          pRipple
          type="submit"
          id="btnSaveExit"
          label="Guardar y Salir"
          class="p-button-success p-button-raised"
          icon="pi pi-save"
        ></button>
      </div>
      <div *ngIf="!idField.value" class="p-field p-col">
        <button
          pButton
          pRipple
          type="button"
          id="btnSaveContinue"
          label="Guardar y Crear Nueva"
          class="p-button-raised"
          icon="pi pi-arrow-right"
          (click)="onSubmit($event, true)"
        ></button>
      </div>
    </div>
  </form>
</div>
